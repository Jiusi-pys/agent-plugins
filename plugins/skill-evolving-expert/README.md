# Self-Evolving Expert Plugin

è‡ªæˆ‘è¿›åŒ–ä¸“å®¶ç³»ç»Ÿæ’ä»¶ã€‚å®ç° Claude Code sub-agent çš„è‡ªæˆ‘è¿›åŒ–æœºåˆ¶ã€‚

## æ ¸å¿ƒåŠŸèƒ½

- **çŸ¥è¯†é—­ç¯**: è§£å†³é—®é¢˜ â†’ æå–çŸ¥è¯† â†’ å­˜å‚¨ç´¢å¼• â†’ æ£€ç´¢åº”ç”¨
- **æ¸è¿›ç§¯ç´¯**: å•æ¬¡è§£å†³æ–¹æ¡ˆ â†’ é«˜é¢‘æ¨¡å¼æç‚¼ â†’ é¢†åŸŸçŸ¥è¯†ä½“ç³»
- **æœ€å°å†—ä½™**: ç›¸ä¼¼é—®é¢˜åˆå¹¶ï¼Œä¿ç•™å·®å¼‚ç‚¹

## å®‰è£…

\`\`\`bash
/plugin marketplace add Jiusi-pys/agent-plugins
/plugin install skill-evolving-expert@jiusi-agent-plugins
\`\`\`

## ä½¿ç”¨

### åˆå§‹åŒ–çŸ¥è¯†åº“

\`\`\`bash
/skill-evolving-expert:kb-init
\`\`\`

### å·¥ä½œæµç¨‹

1. **ä»»åŠ¡å¯åŠ¨å‰** - æ£€ç´¢ç›¸å…³å†å²çŸ¥è¯†
2. **ä»»åŠ¡æ‰§è¡Œ** - æ­£å¸¸æ‰§è¡Œï¼Œè®°å½•è¿‡ç¨‹
3. **ä»»åŠ¡å®Œæˆå** - è‡ªåŠ¨æå–çŸ¥è¯†ç‚¹
4. **æ¨¡å¼æç‚¼** - å‘¨æœŸæ€§åˆå¹¶é«˜é¢‘è§£å†³æ–¹æ¡ˆ

### ğŸª è‡ªåŠ¨åŒ– Hooks

è¯¥æ’ä»¶åŒ…å«ä¸¤ä¸ªè‡ªåŠ¨åŒ– hooksï¼Œå®ç°è®°å¿†çš„è‡ªåŠ¨å½’æ¡£å’Œæ¢å¤ï¼š

#### 1. Session å¯åŠ¨ Hook (on_session_start.sh)

**è§¦å‘æ—¶æœº**: æ–° Session å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ

**åŠŸèƒ½**:
- æ˜¾ç¤ºçŸ¥è¯†åº“å¿«é€Ÿç»Ÿè®¡ï¼ˆæ€»æ•°ã€å¸¸ç”¨è§£å†³æ–¹æ¡ˆã€æ ‡ç­¾åˆ†å¸ƒï¼‰
- è¯»å–ä¸Šæ¬¡ Session ç»“æŸç”Ÿæˆçš„æ€»ç»“æ–‡æ¡£
- è®©ä½ å¿«é€Ÿè¿›å…¥é¡¹ç›®çŠ¶æ€ï¼Œæ— éœ€æ‰‹åŠ¨æŸ¥è¯¢

**è¾“å‡ºç¤ºä¾‹**:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  çŸ¥è¯†åº“ - å¿«é€Ÿå¯åŠ¨æ€»ç»“                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š çŸ¥è¯†åº“ç»Ÿè®¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ è§£å†³æ–¹æ¡ˆæ€»æ•°: 25 ä¸ª
â€¢ å·²æç‚¼æ¨¡å¼: 3 ä¸ª
â€¢ æ¶‰åŠæ ‡ç­¾: 12 ä¸ª

ğŸ† é«˜é¢‘é—®é¢˜è§£å†³ (æœ€å¸¸ç”¨ Top 3)
...
```

#### 2. Session ç»“æŸ Hook (on_session_end.sh)

**è§¦å‘æ—¶æœº**: æ‰§è¡Œ `/clear` æˆ– `/exit` æŒ‡ä»¤æ—¶è‡ªåŠ¨è¿è¡Œ

**åŠŸèƒ½**:
- æ‰«æçŸ¥è¯†åº“ï¼Œè¯†åˆ«é«˜é¢‘è§£å†³æ–¹æ¡ˆï¼ˆå‡ºç° â‰¥3 æ¬¡ï¼‰
- ç”Ÿæˆ Markdown æ ¼å¼çš„çŸ¥è¯†åº“æ€»ç»“ (SUMMARY.md)
- åˆ›å»ºæ—¶é—´æˆ³å¼æ¡£æ¡ˆå¤‡ä»½ï¼ˆå¯æ¢å¤å†å²çŠ¶æ€ï¼‰
- åˆ†æè¿‡æœŸè§£å†³æ–¹æ¡ˆï¼ˆ90å¤©æœªä½¿ç”¨ï¼‰
- ä¸ºä¸‹ä¸€ä¸ª Session æä¾›å¿«é€Ÿè¿›å…¥ç‚¹

**ç”Ÿæˆç‰©**:
- `SUMMARY.md` - çŸ¥è¯†åº“æ€»ç»“ï¼ˆä¸‹æ¬¡ Session å¯åŠ¨ä¼šæ˜¾ç¤ºï¼‰
- `archives/knowledge_archive_YYYYMMDD_HHMMSS.tar.gz` - å®Œæ•´å¤‡ä»½
- `archives/manifest.txt` - å¤‡ä»½æ¸…å•

**è¾“å‡ºç¤ºä¾‹**:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              çŸ¥è¯†åº“å½’æ¡£ä¸ç»„ç»‡å®Œæˆ                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… å·²å®Œæˆçš„æ“ä½œ:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  âœ“ çŸ¥è¯†åº“æ‰«æ
  âœ“ é«˜é¢‘æ¨¡å¼æ£€æŸ¥
  âœ“ ç”Ÿæˆæ€»ç»“æ–‡æ¡£
  âœ“ æ—¶é—´æˆ³æ¡£æ¡ˆå¤‡ä»½
  âœ“ æ¸…ç†è¿‡æœŸæ¡ç›®åˆ†æ
```

### çŸ¥è¯†ç®¡ç†è„šæœ¬

\`\`\`bash
# æ·»åŠ è§£å†³æ–¹æ¡ˆ
./knowledge_manager.sh add "æ ‡é¢˜" "tag1,tag2,tag3" solution.md

# æ£€ç´¢
./knowledge_manager.sh search "å…³é”®è¯"

# è¯»å–
./knowledge_manager.sh read "solution_id"

# ç»Ÿè®¡
./knowledge_manager.sh stats

# æ£€æŸ¥å¯åˆå¹¶æ¨¡å¼
./knowledge_manager.sh check-merge

# æ¸…ç†è¿‡æœŸæ¡ç›®
./knowledge_manager.sh cleanup 90
\`\`\`

## çŸ¥è¯†æå–è§¦å‘æ¡ä»¶

æ»¡è¶³ä»»ä¸€å³è§¦å‘ï¼š
- è§£å†³äº†æ–°é—®é¢˜
- å‘ç°äº†æ›´ä¼˜æ–¹æ¡ˆ
- è¸©å‘å¹¶æ‰¾åˆ°åŸå› 

## ç›®å½•ç»“æ„

\`\`\`
skill-evolving-expert/
â”œâ”€â”€ hooks/                          # è‡ªåŠ¨åŒ– hooks
â”‚   â”œâ”€â”€ hooks.json                  # Hook é…ç½®
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ on_session_start.sh     # æ–° Session å¯åŠ¨é’©å­
â”‚       â””â”€â”€ on_session_end.sh       # Session ç»“æŸé’©å­
â”œâ”€â”€ skills/
â”‚   â””â”€â”€ evolving-expert/
â”‚       â”œâ”€â”€ knowledge/              # çŸ¥è¯†åº“
â”‚       â”‚   â”œâ”€â”€ index.json          # ç´¢å¼•æ–‡ä»¶
â”‚       â”‚   â”œâ”€â”€ SUMMARY.md          # ä¸Šæ¬¡ Session ç”Ÿæˆçš„æ€»ç»“
â”‚       â”‚   â”œâ”€â”€ solutions/          # å•æ¬¡è§£å†³æ–¹æ¡ˆ
â”‚       â”‚   â”‚   â””â”€â”€ YYYYMMDD_HHMMSS_topic.md
â”‚       â”‚   â”œâ”€â”€ patterns/           # é«˜é¢‘æ¨¡å¼
â”‚       â”‚   â”‚   â””â”€â”€ category.md
â”‚       â”‚   â””â”€â”€ archives/           # æ—¶é—´æˆ³å¼æ¡£æ¡ˆå¤‡ä»½
â”‚       â”‚       â”œâ”€â”€ manifest.txt
â”‚       â”‚       â””â”€â”€ knowledge_archive_*.tar.gz
â”‚       â””â”€â”€ scripts/
â”‚           â””â”€â”€ knowledge_manager.sh # çŸ¥è¯†åº“ç®¡ç†è„šæœ¬
â””â”€â”€ README.md
\`\`\`

## é…ç½®

åœ¨ index.json ä¸­é…ç½®ï¼š

\`\`\`json
{
  "config": {
    "auto_extract": true,
    "pattern_merge_threshold": 3,
    "max_solutions_per_tag": 50,
    "cleanup_days": 90
  }
}
\`\`\`

## è§„èŒƒå’Œæœ€ä½³å®è·µ

### ğŸ“‹ Agent è¡Œä¸ºè§„èŒƒ

æ‰€æœ‰ä½¿ç”¨æœ¬æ’ä»¶çš„ Agent **å¿…é¡»** éµå®ˆ [AGENT_SPEC.md](./AGENT_SPEC.md) ä¸­çš„è§„èŒƒã€‚

**æ ¸å¿ƒè¦æ±‚**:

1. **å®Œæ•´æ€§**: è®°å½•æ‰€æœ‰å°è¯•ï¼Œä¸ä½¿ç”¨ç´§å‡‘æ‘˜è¦
2. **YAML Header**: æ‰€æœ‰æ–‡æ¡£å¿…é¡»æœ‰ YAML frontmatter
3. **å¼•ç”¨ä¼˜å…ˆ**: ä½¿ç”¨ `ref:*` é¿å…å†—ä½™å¤åˆ¶
4. **Session è®°å½•**: ä½¿ç”¨ `conversation_recorder.sh` è®°å½•å®Œæ•´å¯¹è¯

### ğŸ“š YAML Header ç¤ºä¾‹

æ‰€æœ‰çŸ¥è¯†åº“æ–‡æ¡£éƒ½å¿…é¡»åŒ…å«è¿™æ ·çš„ header:

```markdown
---
title: é—®é¢˜åç§°
type: solution
created: 2025-01-26T10:00:00Z
tags: [tag1, tag2, tag3]
summary: ä¸€å¥è¯æè¿°
references:
  - ref:related_doc_1
  - ref:external_resource_1
---

# æ–‡æ¡£å†…å®¹...
```

### ğŸ”— å¼•ç”¨ç³»ç»Ÿä½¿ç”¨

```bash
# æ·»åŠ å¼•ç”¨
conversation_recorder.sh add-reference internal_docs ref_hdc_commands "HDC å‘½ä»¤å‚è€ƒ" "skills/hdc-kaihongOS/references/HDC-COMMANDS.md"

# åœ¨æ–‡æ¡£ä¸­ä½¿ç”¨
å‚è§ ref:hdc_commands äº†è§£è¯¦ç»†å‘½ä»¤åˆ—è¡¨
```

### ğŸ“ Session è®°å½•

```bash
# åˆå§‹åŒ–
conversation_recorder.sh init

# åˆ›å»º Session
SESSION_ID=$(date '+%Y%m%d_%H%M%S')
conversation_recorder.sh create-session $SESSION_ID

# è®°å½•æŒ‡ä»¤
conversation_recorder.sh log-instruction $SESSION_ID "your command"

# ç»“æŸæ—¶æ›´æ–°å…ƒæ•°æ®
conversation_recorder.sh update-metadata $SESSION_ID 45000 completed
```

## License

MIT
